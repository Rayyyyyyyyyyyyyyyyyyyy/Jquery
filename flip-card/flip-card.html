<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="UTF-8">
    <title>Flip card</title>
</head>
<style>
    body {
        margin: 50px;
    }
    /*     
    .box img {
        width: 300px;
    } */
    
    .card {
        position: relative;
        transform-style: preserve-3d;
        float: left;
        margin: 0 20px 20px;
        width: 200px;
        height: 280px;
        /*height:400px;*/
        box-shadow: 3px 3px 10px rgb(0, 0, 0);
    }
    
    .card.active {
        transform: rotateY(180deg);
        -webkit-transform: rotateY(180deg);
    }
    
    .card.bingo {
        /* transform: rotateY(180deg);
        -webkit-transform: rotateY(180deg); */
        opacity: .2;
    }
    
    .card img {
        width: 100%;
        position: absolute;
        left: 0;
        top: 0;
        display: block;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        border-radius: 10px;
        overflow: hidden;
    }
    
    .front {
        transform: rotateY(180deg);
        -webkit-transform: rotateY(180deg);
    }
    
    .transition {
        transition: all .5s;
        -webkit-transition: all .5s;
    }
    /* .box:hover {
        transform: rotateY(180deg);
        -webkit-transform: rotateY(180deg);
        transition: .5s;
        opacity: 0;
    } */
</style>

<body>
    <div class="container">
        <div id="position"></div>

        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/dr_strange.jpg" alt="">
            </div>
        </div>
        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/dr_fate.jpg" alt="">
            </div>
        </div>
        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/dr_fate.jpg" alt="">
            </div>
        </div>
        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/dr_strange.jpg" alt="">
            </div>
        </div>
        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/pic1.jpg" alt="">
            </div>
        </div>
        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/pic1.jpg" alt="">
            </div>
        </div>
        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/pic2.jpg" alt="">
            </div>
        </div>
        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/pic2.jpg" alt="">
            </div>
        </div>
        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/pic3.jpg" alt="">
            </div>
        </div>
        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/pic3.jpg" alt="">
            </div>
        </div>
        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/pic4.jpg" alt="">
            </div>
        </div>
        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/pic4.jpg" alt="">
            </div>
        </div>
        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/pic5.jpg" alt="">
            </div>
        </div>
        <div class="card transition">
            <div class="card_wrap">
                <img class="back" src="images/card.jpg">
                <img class="front" src="images/pic5.jpg" alt="">
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>

    <script>
        let cardLength = $(".container .card").length;


        for (i = 0; i < cardLength; i++) {
            let random = Math.floor(Math.random() * cardLength)
            $(".container .card").eq(random).appendTo("#position")
        }


        setTimeout(() => {
            $(".card").addClass("active");
        }, 100)
        setTimeout(removeClass, 2000)

        let card1 = "1"
        let card2 = "2"

        $(".card").click(function() {
            $(this).toggleClass("active")

            if ($(".container .active").length % 2 == 1) {
                card1 = $(this).find("img.front").attr("src")
                    // console.log("card1: " + card1)
            } else {
                card2 = $(this).find("img.front").attr("src")
                    // console.log("card2: " + card2)
                setTimeout(removeClass, 600)
            }
        })

        function removeClass() {
            if (card1 == card2) {
                $(".container .active").addClass("bingo")
                $(".container .card").removeClass("active")
                let bingoLength = $(".container .bingo").length

                if (($(".container .bingo").length) % 2 == 1) {
                    $(".container .card").removeClass("bingo")
                }

                if (cardLength == bingoLength) {
                    alert("恭喜喔")
                    location.reload()
                }
            } else {
                $(".container .card").removeClass("active")
            }
        }
    </script>
</body>

</html>